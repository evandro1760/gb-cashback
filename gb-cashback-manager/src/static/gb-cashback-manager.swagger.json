{
    "swagger": "2.0",
    "info": {
        "description": "gb-cashback-manager",
        "version": "1.0.0",
        "title": "gb-cashback-manager",
        "termsOfService": "urn:tos",
        "contact": {
            "name": "Evandro Junior",
            "email": "evandro.1760@gmail.com"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0"
        }
    },
    "tags": [
        {
            "name": "auth-operations"
        },
        {
            "name": "health-check"
        },
        {
            "name": "purchase-operations"
        }
    ],
    "paths": {
        "/actuator/health": {
            "get": {
                "tags": [
                    "health-check"
                ],
                "summary": "Validar saúde da aplicação",
                "operationId": "getActuatorHealth",
                "produces": [
                    "application/json"
                ],
                "responses": {
                    "200": {
                        "description": "Resumo da aplicação",
                        "schema": {
                            "$ref": "#/definitions/getActuatorHealthResponse"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "500": {
                        "description": "Erro interno na aplicação",
                        "schema": {
                            "$ref": "#/definitions/defaultError500Response"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "504": {
                        "description": "Tempo de resposta esgotado",
                        "schema": {
                            "$ref": "#/definitions/timeoutResponse"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    }
                },
                "security": [],
                "description": "Validar saúde da aplicação",
                "x-internal": false
            }
        },
        "/v1/retailer/signup": {
            "post": {
                "summary": "Cadastro de um novo Revendedor",
                "operationId": "post-v1-retailer-signup",
                "responses": {
                    "201": {
                        "description": "Revendedor cadastrado com sucesso.",
                        "schema": {
                            "$ref": "#/definitions/retailerSignUpResponse"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "400": {
                        "description": "Requisição contém algum valor inválido.",
                        "schema": {
                            "$ref": "#/definitions/retailerSignUp400Response"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "409": {
                        "description": "Usuário com mesmo CPF ou E-mail já existe.",
                        "schema": {
                            "$ref": "#/definitions/retailerSignUp409Response"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "500": {
                        "description": "Erro inesperado na aplicação.",
                        "schema": {
                            "$ref": "#/definitions/defaultError500Response"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "504": {
                        "description": "Tempo de resposta esgotado.",
                        "schema": {
                            "$ref": "#/definitions/timeoutResponse"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    }
                },
                "tags": [
                    "auth-operations"
                ],
                "description": "Cadastro de um novo Revendedor com nome completo, CPF, e-mail e senha.",
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/retailerSignUpRequest"
                        }
                    }
                ]
            }
        },
        "/v1/retailer/signin": {
            "post": {
                "summary": "Login de Revendedor",
                "operationId": "post-v1-retailer-signin",
                "responses": {
                    "200": {
                        "description": "Login feito com sucesso e token de sessão retornado.",
                        "schema": {
                            "$ref": "#/definitions/retailerSignInResponse"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "400": {
                        "description": "Requisição contém algum valor inválido.",
                        "schema": {
                            "$ref": "#/definitions/retailerSignUp400Response"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "401": {
                        "description": "Usuário e/ou senha incorretos.",
                        "schema": {
                            "$ref": "#/definitions/retailerSignIn401Response"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "500": {
                        "description": "Erro inesperado na aplicação.",
                        "schema": {
                            "$ref": "#/definitions/defaultError500Response"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    },
                    "504": {
                        "description": "Tempo de resposta esgotado.",
                        "schema": {
                            "$ref": "#/definitions/timeoutResponse"
                        },
                        "headers": {
                            "transactionId": {
                                "type": "string",
                                "description": "ID da operação realizada. Útil para fins de depuração.",
                                "format": "uuid"
                            }
                        }
                    }
                },
                "tags": [
                    "auth-operations"
                ],
                "description": "Valida login de um revendedor com o seu CPF ou E-mail e senha.",
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "schema": {
                            "$ref": "#/definitions/retailerSignInRequest"
                        }
                    }
                ]
            }
        },
        "/v1/retailer/purchase": {
            "parameters": [],
            "post": {
                "summary": "",
                "operationId": "post-v1-retailer-purchase",
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                },
                "tags": [
                    "purchase-operations"
                ]
            }
        },
        "/v1/retailer/purchases": {
            "get": {
                "summary": "Your GET endpoint",
                "tags": [
                    "purchase-operations"
                ],
                "responses": {},
                "operationId": "get-v1-purchases"
            },
            "parameters": []
        },
        "/v1/retailer/cashback/balance": {
            "get": {
                "summary": "Your GET endpoint",
                "tags": [
                    "cashback-operations"
                ],
                "responses": {},
                "operationId": "get-v1-retailer-cashback-balance"
            }
        }
    },
    "definitions": {
        "getActuatorHealthResponse": {
            "description": "",
            "type": "object",
            "x-examples": {},
            "title": "getActuatorHealthResponse",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Nome do serviço em execução.",
                    "example": "gb-cashback-manager"
                },
                "version": {
                    "type": "string",
                    "example": "1.0.0",
                    "description": "Versão do serviço em execução."
                },
                "description": {
                    "type": "string",
                    "example": "Serviço responsável por agregar funcionalidades de cashback para revendedores.",
                    "description": "Breve descrição do serviço em execução."
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Quando a requisição do usuário foi recebida."
                }
            },
            "required": [
                "name",
                "version",
                "description",
                "timestamp"
            ]
        },
        "defaultError500Response": {
            "title": "defaultError500Response",
            "type": "object",
            "properties": {
                "errorMessage": {
                    "type": "string",
                    "description": "Mensagem de erro.",
                    "example": "unexpected error encountered"
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Quando a requisição do usuário foi recebida."
                },
                "transactionId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID da operação realizada. Útil para fins de depuração."
                }
            },
            "required": [
                "errorMessage",
                "timestamp",
                "transactionId"
            ]
        },
        "timeoutResponse": {
            "title": "timeoutResponse",
            "type": "object",
            "properties": {
                "errorMessage": {
                    "type": "string",
                    "description": "Mensagem de erro.",
                    "example": "timeout"
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Quando a requisição do usuário foi recebida."
                },
                "transactionId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID da operação realizada. Útil para fins de depuração."
                }
            },
            "required": [
                "errorMessage",
                "timestamp",
                "transactionId"
            ]
        },
        "retailerSignUpRequest": {
            "title": "retailerSignUpRequest",
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Nome completo do revendedor.",
                    "example": "Ana Maria de Souza",
                    "minLength": 1
                },
                "cpf": {
                    "type": "string",
                    "description": "CPF do revendedor. Este deve ser válido e com qualquer separador entre os 11 digitos.",
                    "example": "67176980047",
                    "minLength": 11
                },
                "email": {
                    "type": "string",
                    "format": "email",
                    "example": "ana.souza@grupoboticario.com.br",
                    "description": "E-mail do revendedor."
                },
                "password": {
                    "type": "string",
                    "format": "password",
                    "example": "@123abc",
                    "minLength": 8,
                    "description": "Senha para acesso a conta do revendedor."
                }
            },
            "required": [
                "name",
                "cpf",
                "email",
                "password"
            ]
        },
        "retailerSignUpResponse": {
            "title": "retailerSignUpResponse",
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "description": "Confirmação de cadastro com sucesso.",
                    "enum": [
                        "Successfully registered retailer"
                    ]
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Quando a requisição do usuário foi recebida."
                }
            },
            "required": [
                "message",
                "timestamp"
            ]
        },
        "retailerSignUp400Response": {
            "title": "retailerSignUp400Response",
            "type": "object",
            "properties": {
                "errorMessage": {
                    "type": "string",
                    "description": "Mensagem de erro.",
                    "enum": [
                        "Invalid cpf format. Must be a string with a valid CPF at least 11 digits",
                        "Invalid email format. Must be a string with a valid email",
                        "Invalid name format. Must be a string with least 1 character",
                        "Invalid password format. Must be a string with least 8 characters"
                    ]
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Quando a requisição do usuário foi recebida."
                },
                "transactionId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID da operação realizada. Útil para fins de depuração."
                }
            },
            "required": [
                "errorMessage",
                "timestamp",
                "transactionId"
            ]
        },
        "retailerSignUp409Response": {
            "title": "retailerSignUp409Response",
            "type": "object",
            "properties": {
                "errorMessage": {
                    "type": "string",
                    "description": "Mensagem de erro.",
                    "enum": [
                        "Already exists a user with the same cpf or email"
                    ]
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Quando a requisição do usuário foi recebida."
                },
                "transactionId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID da operação realizada. Útil para fins de depuração."
                }
            },
            "required": [
                "errorMessage",
                "timestamp",
                "transactionId"
            ]
        },
        "retailerSignInRequest": {
            "title": "retailerSignInRequest",
            "type": "object",
            "properties": {
                "username": {
                    "type": "string",
                    "description": "CPF ou E-mail do revendedor. O CPF deve ser válido e com qualquer separador entre os 11 digitos.",
                    "example": "67176980047"
                },
                "password": {
                    "type": "string",
                    "format": "password",
                    "minLength": 8,
                    "description": "Senha para acesso a conta do revendedor.",
                    "example": "@123abc"
                }
            },
            "required": [
                "username",
                "password"
            ]
        },
        "retailerSignInResponse": {
            "title": "retailerSignInResponse",
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "description": "Confirmação de login realizado com sucesso.",
                    "enum": [
                        "Login successfully"
                    ]
                },
                "accessToken": {
                    "type": "string",
                    "example": "eyuibUIbuiboBUJBJUKBuibuBKJbuKBbBO8098UJBjbUIB",
                    "description": "Token resultante do login de um revendedor. Deve ser guardado para uso nas demais requisições."
                },
                "expiresIn": {
                    "type": "number",
                    "example": 3600,
                    "minimum": 0,
                    "description": "Tempo, em segundos, de duração do accessToken."
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Quando a requisição do usuário foi recebida."
                }
            },
            "required": [
                "message",
                "accessToken",
                "expiresIn",
                "timestamp"
            ]
        },
        "retailerSignIn400Response": {
            "title": "retailerSignIn400Response",
            "type": "object",
            "properties": {
                "errorMessage": {
                    "type": "string",
                    "description": "Mensagem de erro.",
                    "enum": [
                        "Invalid cpf format. Must be a string with a valid CPF at least 11 digits",
                        "Invalid email format. Must be a string with a valid email",
                        "Invalid password format. Must be a string with least 8 characters"
                    ]
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Quando a requisição do usuário foi recebida."
                },
                "transactionId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID da operação realizada. Útil para fins de depuração."
                }
            },
            "required": [
                "errorMessage",
                "timestamp",
                "transactionId"
            ]
        },
        "retailerSignIn401Response": {
            "title": "retailerSignIn401Response",
            "type": "object",
            "properties": {
                "errorMessage": {
                    "type": "string",
                    "description": "Mensagem de erro.",
                    "enum": [
                        "Username and/or password incorrect"
                    ]
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Quando a requisição do usuário foi recebida."
                },
                "transactionId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "ID da operação realizada. Útil para fins de depuração."
                }
            },
            "required": [
                "errorMessage",
                "timestamp",
                "transactionId"
            ]
        }
    },
    "securityDefinitions": {
        "Authorization": {
            "name": "Authorization",
            "type": "apiKey",
            "in": "header",
            "description": "Token de sessão do revendedor. É obtido ao realizar SigIn."
        }
    },
    "responses": {},
    "produces": [
        "application/json"
    ],
    "consumes": [
        "application/json"
    ]
}